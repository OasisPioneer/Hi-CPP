# C++ å‡½æ•°ä¸ä½œç”¨åŸŸ

## 1. å‡½æ•°å®šä¹‰ä¸è°ƒç”¨

### 1.1 å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µ
å‡½æ•°æ˜¯C++ä¸­ç”¨äºå°è£…å¯é‡ç”¨ä»£ç å—çš„æœºåˆ¶ï¼Œå®ƒæ¥å—è¾“å…¥å‚æ•°ï¼Œæ‰§è¡Œç‰¹å®šæ“ä½œï¼Œå¹¶å¯èƒ½è¿”å›ç»“æœã€‚å‡½æ•°çš„ä½¿ç”¨å¯ä»¥ä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–ã€æ˜“äºç»´æŠ¤å’Œå¤ç”¨ã€‚

### 1.2 å‡½æ•°çš„å£°æ˜ä¸å®ç°
C++æ¨èå°†å‡½æ•°çš„å£°æ˜ï¼ˆåŸå‹ï¼‰å’Œå®ç°åˆ†ç¦»ï¼Œé€šå¸¸å°†å£°æ˜æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ.hï¼‰ä¸­ï¼Œå®ç°æ”¾åœ¨æºæ–‡ä»¶ï¼ˆ.cppï¼‰ä¸­ã€‚è¿™ç§åˆ†ç¦»ç¼–è¯‘çš„æ–¹å¼å¯ä»¥æé«˜ç¼–è¯‘æ•ˆç‡ï¼Œä¾¿äºä»£ç ç®¡ç†ã€‚

#### å‡½æ•°å£°æ˜
å‡½æ•°å£°æ˜å‘Šè¯‰ç¼–è¯‘å™¨å‡½æ•°çš„åç§°ã€è¿”å›ç±»å‹å’Œå‚æ•°åˆ—è¡¨ï¼Œä½†ä¸åŒ…å«å‡½æ•°ä½“ã€‚å£°æ˜çš„è¯­æ³•å¦‚ä¸‹ï¼š

```cpp
è¿”å›ç±»å‹ å‡½æ•°å(å‚æ•°ç±»å‹1 å‚æ•°å1, å‚æ•°ç±»å‹2 å‚æ•°å2, ...);
```

**ç¤ºä¾‹ï¼š**
```cpp
// math.h å¤´æ–‡ä»¶
int add(int a, int b);          // å£°æ˜addå‡½æ•°
double divide(double x, double y);  // å£°æ˜divideå‡½æ•°
void print_result(int result);   // å£°æ˜print_resultå‡½æ•°
```

#### å‡½æ•°å®ç°
å‡½æ•°å®ç°åŒ…å«å‡½æ•°çš„å…·ä½“ä»£ç ï¼Œå³å‡½æ•°ä½“ã€‚å®ç°çš„è¯­æ³•å¦‚ä¸‹ï¼š

```cpp
è¿”å›ç±»å‹ å‡½æ•°å(å‚æ•°ç±»å‹1 å‚æ•°å1, å‚æ•°ç±»å‹2 å‚æ•°å2, ...) {
    // å‡½æ•°ä½“ï¼šæ‰§è¡Œçš„ä»£ç 
    return è¿”å›å€¼;  // å¯¹äºévoidè¿”å›ç±»å‹
}
```

**ç¤ºä¾‹ï¼š**
```cpp
// math.cpp æºæ–‡ä»¶
#include "math.h"
#include <iostream>

int add(int a, int b) {
    return a + b;
}

double divide(double x, double y) {
    if (y != 0) {
        return x / y;
    }
    std::cout << "é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸ºé›¶ï¼" << std::endl;
    return 0;
}

void print_result(int result) {
    std::cout << "ç»“æœæ˜¯ï¼š" << result << std::endl;
}
```

#### å‡½æ•°è°ƒç”¨
å‡½æ•°è°ƒç”¨æ˜¯æ‰§è¡Œå‡½æ•°ä»£ç çš„è¿‡ç¨‹ï¼Œéœ€è¦æä¾›å®é™…å‚æ•°ï¼ˆå®å‚ï¼‰æ¥ä¼ é€’ç»™å‡½æ•°çš„å½¢å¼å‚æ•°ï¼ˆå½¢å‚ï¼‰ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
// main.cpp
#include "math.h"

int main() {
    int sum = add(3, 4);  // è°ƒç”¨addå‡½æ•°ï¼Œä¼ å…¥å®å‚3å’Œ4
    print_result(sum);    // è°ƒç”¨print_resultå‡½æ•°
    
    double quotient = divide(10.0, 2.0);  // è°ƒç”¨divideå‡½æ•°
    
    return 0;
}
```

### 1.3 å‡½æ•°çš„è¿”å›ç±»å‹
- **évoidè¿”å›ç±»å‹**ï¼šå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªä¸å£°æ˜ç±»å‹åŒ¹é…çš„å€¼
- **voidè¿”å›ç±»å‹**ï¼šå‡½æ•°ä¸è¿”å›ä»»ä½•å€¼
- **è¿”å›å¼•ç”¨**ï¼šå‡½æ•°å¯ä»¥è¿”å›å˜é‡çš„å¼•ç”¨ï¼Œç”¨äºé¿å…æ‹·è´å¤§å¯¹è±¡
- **è¿”å›æŒ‡é’ˆ**ï¼šå‡½æ•°å¯ä»¥è¿”å›æŒ‡é’ˆï¼Œä½†éœ€æ³¨æ„æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ

## 2. å‚æ•°ä¼ é€’ï¼ˆæ ¸å¿ƒï¼‰

C++ä¸­å‚æ•°ä¼ é€’æœ‰ä¸‰ç§ä¸»è¦æ–¹å¼ï¼šå€¼ä¼ é€’ã€å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’ã€‚é€‰æ‹©åˆé€‚çš„ä¼ é€’æ–¹å¼å¯¹ç¨‹åºçš„æ€§èƒ½å’Œæ­£ç¡®æ€§è‡³å…³é‡è¦ã€‚

### 2.1 å€¼ä¼ é€’
å€¼ä¼ é€’æ˜¯å°†å®å‚çš„å€¼å¤åˆ¶ä¸€ä»½ä¼ é€’ç»™å½¢å‚ï¼Œå‡½æ•°å†…éƒ¨å¯¹å½¢å‚çš„ä¿®æ”¹ä¸ä¼šå½±å“å®å‚ã€‚

**ç‰¹ç‚¹ï¼š**
- å®‰å…¨ï¼Œä¸ä¼šæ„å¤–ä¿®æ”¹å®å‚
- å¯¹äºå¤§å¯¹è±¡ï¼Œæ‹·è´æˆæœ¬é«˜ï¼Œæ•ˆç‡ä½

**ç¤ºä¾‹ï¼š**
```cpp
void increment(int x) {  // xæ˜¯å®å‚çš„æ‹·è´
    x++;                 // åªä¿®æ”¹äº†æ‹·è´
    std::cout << "å‡½æ•°å†…ï¼šx = " << x << std::endl;  // 6
}

int main() {
    int a = 5;
    increment(a);        // ä¼ é€’açš„å€¼
    std::cout << "å‡½æ•°å¤–ï¼ša = " << a << std::endl;  // 5ï¼ˆæœªæ”¹å˜ï¼‰
    return 0;
}
```

### 2.2 å¼•ç”¨ä¼ é€’
å¼•ç”¨ä¼ é€’æ˜¯å°†å®å‚çš„å¼•ç”¨ï¼ˆåˆ«åï¼‰ä¼ é€’ç»™å½¢å‚ï¼Œå‡½æ•°å†…éƒ¨å¯¹å½¢å‚çš„ä¿®æ”¹ä¼šç›´æ¥å½±å“å®å‚ã€‚

**è¯­æ³•ï¼š** åœ¨å‚æ•°ç±»å‹åæ·»åŠ  `&`

**ç‰¹ç‚¹ï¼š**
- é¿å…äº†æ‹·è´ï¼Œæ•ˆç‡é«˜
- å¯ä»¥ä¿®æ”¹å®å‚
- å¼•ç”¨å¿…é¡»åœ¨åˆå§‹åŒ–æ—¶ç»‘å®šåˆ°å¯¹è±¡ï¼Œä¸”ä¸èƒ½é‡æ–°ç»‘å®š

**ç¤ºä¾‹ï¼š**
```cpp
void increment(int& x) {  // xæ˜¯å®å‚çš„å¼•ç”¨
    x++;                  // ç›´æ¥ä¿®æ”¹å®å‚
    std::cout << "å‡½æ•°å†…ï¼šx = " << x << std::endl;  // 6
}

int main() {
    int a = 5;
    increment(a);        // ä¼ é€’açš„å¼•ç”¨
    std::cout << "å‡½æ•°å¤–ï¼ša = " << a << std::endl;  // 6ï¼ˆå·²æ”¹å˜ï¼‰
    return 0;
}
```

### 2.3 æŒ‡é’ˆä¼ é€’
æŒ‡é’ˆä¼ é€’æ˜¯å°†å®å‚çš„åœ°å€ä¼ é€’ç»™å½¢å‚æŒ‡é’ˆï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å’Œä¿®æ”¹å®å‚ã€‚

**è¯­æ³•ï¼š** åœ¨å‚æ•°ç±»å‹åæ·»åŠ  `*`

**ç‰¹ç‚¹ï¼š**
- é¿å…äº†æ‹·è´ï¼Œæ•ˆç‡é«˜
- å¯ä»¥ä¿®æ”¹å®å‚
- æŒ‡é’ˆå¯ä»¥ä¸ºnullptrï¼Œéœ€è¦æ£€æŸ¥æœ‰æ•ˆæ€§
- å¯ä»¥é‡æ–°æŒ‡å‘å…¶ä»–å¯¹è±¡

**ç¤ºä¾‹ï¼š**
```cpp
void increment(int* x) {  // xæ˜¯æŒ‡å‘å®å‚çš„æŒ‡é’ˆ
    if (x != nullptr) {    // æ£€æŸ¥æŒ‡é’ˆæœ‰æ•ˆæ€§
        (*x)++;            // é€šè¿‡è§£å¼•ç”¨ä¿®æ”¹å®å‚
        std::cout << "å‡½æ•°å†…ï¼š*x = " << *x << std::endl;  // 6
    }
}

int main() {
    int a = 5;
    increment(&a);        // ä¼ é€’açš„åœ°å€
    std::cout << "å‡½æ•°å¤–ï¼ša = " << a << std::endl;  // 6ï¼ˆå·²æ”¹å˜ï¼‰
    
    increment(nullptr);   // ä¼ é€’ç©ºæŒ‡é’ˆï¼Œä¼šè¢«å‡½æ•°å†…éƒ¨æ£€æŸ¥
    return 0;
}
```

### 2.4 const ä¿®é¥°çš„å‚æ•°
ä½¿ç”¨ `const` ä¿®é¥°å‚æ•°å¯ä»¥é˜²æ­¢å‡½æ•°å†…éƒ¨æ„å¤–ä¿®æ”¹å®å‚ï¼Œæé«˜ä»£ç å®‰å…¨æ€§ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
// const å€¼ä¼ é€’ï¼ˆå¯¹äºåŸºæœ¬ç±»å‹æ„ä¹‰ä¸å¤§ï¼Œä½†å¯¹äºè‡ªå®šä¹‰ç±»å‹å¯ä»¥é˜²æ­¢æ‹·è´åçš„ä¿®æ”¹ï¼‰
void print_value(const int x) {
    // x = 10;  // é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹constå‚æ•°
    std::cout << x << std::endl;
}

// const å¼•ç”¨ä¼ é€’ï¼ˆå¸¸ç”¨ï¼Œé¿å…æ‹·è´ä¸”é˜²æ­¢ä¿®æ”¹ï¼‰
void print_string(const std::string& s) {
    // s = "new string";  // é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹constå¼•ç”¨
    std::cout << s << std::endl;
}

// const æŒ‡é’ˆä¼ é€’ï¼ˆé˜²æ­¢ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼‰
void print_array(const int* arr, int size) {
    for (int i = 0; i < size; i++) {
        // arr[i] = 0;  // é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹constæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹
        std::cout << arr[i] << " ";
    }
    std::cout << std::endl;
}
```

## 3. å‘½åç©ºé—´

å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ˜¯C++ä¸­ç”¨äºé¿å…å‘½åå†²çªçš„æœºåˆ¶ï¼Œå®ƒå…è®¸å°†ç›¸å…³çš„ä»£ç ç»„ç»‡åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªä½œç”¨åŸŸã€‚

### 3.1 å‘½åç©ºé—´çš„å®šä¹‰

**åŸºæœ¬è¯­æ³•ï¼š**
```cpp
namespace å‘½åç©ºé—´å {
    // å£°æ˜æˆ–å®šä¹‰å˜é‡ã€å‡½æ•°ã€ç±»ç­‰
}
```

**ç¤ºä¾‹ï¼š**
```cpp
// å®šä¹‰ä¸€ä¸ªåä¸ºmathçš„å‘½åç©ºé—´
namespace math {
    const double PI = 3.1415926535;
    
    int add(int a, int b) {
        return a + b;
    }
    
    double circle_area(double radius) {
        return PI * radius * radius;
    }
}

// å‘½åç©ºé—´å¯ä»¥åµŒå¥—
namespace my_project {
    namespace utils {
        void log(const std::string& message) {
            std::cout << "[LOG] " << message << std::endl;
        }
    }
}
```

### 3.2 å‘½åç©ºé—´çš„ä½¿ç”¨

#### 3.2.1 ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦ ::
æœ€å®‰å…¨çš„æ–¹å¼æ˜¯ä½¿ç”¨ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦ `::` æ¥è®¿é—®å‘½åç©ºé—´ä¸­çš„æˆå‘˜ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
int main() {
    double area = math::circle_area(5.0);
    std::cout << "åœ†çš„é¢ç§¯ï¼š" << area << std::endl;
    
    my_project::utils::log("ç¨‹åºå¯åŠ¨");
    
    return 0;
}
```

#### 3.2.2 using å£°æ˜
`using` å£°æ˜å¯ä»¥å¼•å…¥å‘½åç©ºé—´ä¸­çš„ç‰¹å®šæˆå‘˜ï¼Œä½¿åç»­ä»£ç å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥æˆå‘˜åã€‚

**ç¤ºä¾‹ï¼š**
```cpp
int main() {
    using math::add;  // å¼•å…¥mathå‘½åç©ºé—´ä¸­çš„addå‡½æ•°
    int sum = add(3, 4);  // ç›´æ¥ä½¿ç”¨addï¼Œæ— éœ€å‰ç¼€
    
    using math::PI;   // å¼•å…¥mathå‘½åç©ºé—´ä¸­çš„PIå¸¸é‡
    double circumference = 2 * PI * 5.0;
    
    return 0;
}
```

#### 3.2.3 using æŒ‡ä»¤
`using` æŒ‡ä»¤å¯ä»¥å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´ï¼Œä½¿è¯¥å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
int main() {
    using namespace math;  // å¼•å…¥æ•´ä¸ªmathå‘½åç©ºé—´
    
    int sum = add(3, 4);
    double area = circle_area(5.0);
    double circumference = 2 * PI * 5.0;
    
    return 0;
}
```

**æ³¨æ„äº‹é¡¹ï¼š**
- é¿å…åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨ `using namespace std;`ï¼Œè¿™ä¼šå¯¼è‡´å‘½åå†²çªï¼Œå½±å“æ‰€æœ‰åŒ…å«è¯¥å¤´æ–‡ä»¶çš„æºæ–‡ä»¶
- åœ¨æºæ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨ `using namespace std;`ï¼Œä½†è¦è°¨æ…ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­
- ä¼˜å…ˆä½¿ç”¨ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦æˆ– `using` å£°æ˜ï¼Œä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå®‰å…¨æ€§

### 3.3 åŒ¿åå‘½åç©ºé—´

åŒ¿åå‘½åç©ºé—´ï¼ˆunnamed namespaceï¼‰ç”¨äºå®šä¹‰åªåœ¨å½“å‰æ–‡ä»¶å¯è§çš„æˆå‘˜ï¼Œç›¸å½“äºå†…éƒ¨é“¾æ¥ã€‚

**è¯­æ³•ï¼š**
```cpp
namespace {
    // å£°æ˜æˆ–å®šä¹‰åªåœ¨å½“å‰æ–‡ä»¶å¯è§çš„æˆå‘˜
}
```

**ç¤ºä¾‹ï¼š**
```cpp
// file1.cpp
namespace {
    int helper() {  // åªåœ¨file1.cppä¸­å¯è§
        return 42;
    }
}

// file2.cpp æ— æ³•è®¿é—®file1.cppä¸­çš„helperå‡½æ•°
```

## 4. å‡½æ•°é‡è½½

å‡½æ•°é‡è½½ï¼ˆfunction overloadingï¼‰å…è®¸åœ¨åŒä¸€ä½œç”¨åŸŸå†…å®šä¹‰å¤šä¸ªåŒåå‡½æ•°ï¼Œåªè¦å®ƒä»¬çš„å‚æ•°åˆ—è¡¨ä¸åŒã€‚ç¼–è¯‘å™¨é€šè¿‡åç§°ä¿®é¥°ï¼ˆName Manglingï¼‰æ¥åŒºåˆ†è¿™äº›å‡½æ•°ã€‚

### 4.1 å‡½æ•°é‡è½½çš„æ¡ä»¶

è¦é‡è½½å‡½æ•°ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š
- å‚æ•°ä¸ªæ•°ä¸åŒ
- å‚æ•°ç±»å‹ä¸åŒ
- å‚æ•°ç±»å‹çš„é¡ºåºä¸åŒ

**æ³¨æ„ï¼š** è¿”å›ç±»å‹ä¸åŒä¸è¶³ä»¥æ„æˆå‡½æ•°é‡è½½ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
// æœ‰æ•ˆçš„å‡½æ•°é‡è½½
double add(double a, double b);  // å‚æ•°ç±»å‹ä¸åŒ
int add(int a, int b);           // å‚æ•°ç±»å‹ä¸åŒ
int add(int a, int b, int c);    // å‚æ•°ä¸ªæ•°ä¸åŒ

// æ— æ•ˆçš„å‡½æ•°é‡è½½
// int add(int x, int y);  // ä¸int add(int a, int b)å‚æ•°åˆ—è¡¨ç›¸åŒï¼Œä»…å‚æ•°åä¸åŒ
// void add(int a, int b); // ä»…è¿”å›ç±»å‹ä¸åŒï¼Œä¸è¶³ä»¥æ„æˆé‡è½½
```

### 4.2 åç§°ä¿®é¥°ï¼ˆName Manglingï¼‰

åç§°ä¿®é¥°æ˜¯ç¼–è¯‘å™¨å°†å‡½æ•°åå’Œå‚æ•°ç±»å‹ç»„åˆæˆä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦çš„è¿‡ç¨‹ï¼Œç”¨äºåœ¨é“¾æ¥æ—¶åŒºåˆ†ä¸åŒçš„é‡è½½å‡½æ•°ã€‚

**ç¤ºä¾‹ï¼š**
- `int add(int, int)` å¯èƒ½è¢«ä¿®é¥°ä¸º `_Z3addii`
- `double add(double, double)` å¯èƒ½è¢«ä¿®é¥°ä¸º `_Z3adddd`
- `int add(int, int, int)` å¯èƒ½è¢«ä¿®é¥°ä¸º `_Z3addiii`

### 4.3 å‡½æ•°é‡è½½ä¸const

constä¿®é¥°ç¬¦å¯ä»¥ç”¨äºå‡½æ•°é‡è½½ï¼ŒåŒ…æ‹¬ï¼š
- constä¿®é¥°çš„å‚æ•°ï¼ˆå¯¹äºå¼•ç”¨å’ŒæŒ‡é’ˆï¼‰
- constæˆå‘˜å‡½æ•°ï¼ˆç”¨äºç±»çš„æˆå‘˜å‡½æ•°ï¼‰

**ç¤ºä¾‹ï¼š**
```cpp
// é‡è½½ï¼šconstå¼•ç”¨å‚æ•° vs éconstå¼•ç”¨å‚æ•°
void print(std::string& s) {  // éconstå¼•ç”¨ï¼Œå¯ä»¥ä¿®æ”¹
    std::cout << "éconst: " << s << std::endl;
}

void print(const std::string& s) {  // constå¼•ç”¨ï¼Œä¸èƒ½ä¿®æ”¹
    std::cout << "const: " << s << std::endl;
}

// é‡è½½ï¼šconstæŒ‡é’ˆå‚æ•° vs éconstæŒ‡é’ˆå‚æ•°
void print(int* p) {  // éconstæŒ‡é’ˆï¼Œå¯ä»¥ä¿®æ”¹æŒ‡å‘çš„å†…å®¹
    std::cout << "éconstæŒ‡é’ˆ: " << *p << std::endl;
}

void print(const int* p) {  // constæŒ‡é’ˆï¼Œä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å†…å®¹
    std::cout << "constæŒ‡é’ˆ: " << *p << std::endl;
}
```

### 4.4 å‡½æ•°é‡è½½çš„è§£æ

ç¼–è¯‘å™¨åœ¨è°ƒç”¨é‡è½½å‡½æ•°æ—¶ï¼Œä¼šæ ¹æ®å®å‚çš„ç±»å‹ã€æ•°é‡å’Œé¡ºåºï¼Œé€‰æ‹©æœ€åŒ¹é…çš„å‡½æ•°ã€‚è§£æè¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š

1. **ç²¾ç¡®åŒ¹é…**ï¼šå¯»æ‰¾å‚æ•°ç±»å‹å®Œå…¨åŒ¹é…çš„å‡½æ•°
2. **æå‡åŒ¹é…**ï¼šé€šè¿‡æ ‡å‡†ç±»å‹æå‡ï¼ˆå¦‚charâ†’intï¼Œfloatâ†’doubleï¼‰å¯»æ‰¾åŒ¹é…
3. **è½¬æ¢åŒ¹é…**ï¼šé€šè¿‡éšå¼ç±»å‹è½¬æ¢å¯»æ‰¾åŒ¹é…

**ç¤ºä¾‹ï¼š**
```cpp
void f(int);
void f(double);

int main() {
    f(5);       // ç²¾ç¡®åŒ¹é…void f(int)
    f(5.0);     // ç²¾ç¡®åŒ¹é…void f(double)
    f('a');     // æå‡åŒ¹é…ï¼šcharâ†’intï¼Œè°ƒç”¨void f(int)
    f(3.14f);   // æå‡åŒ¹é…ï¼šfloatâ†’doubleï¼Œè°ƒç”¨void f(double)
    return 0;
}
```

## 5. ä½œç”¨åŸŸ

ä½œç”¨åŸŸï¼ˆscopeï¼‰æ˜¯æŒ‡å˜é‡ã€å‡½æ•°æˆ–å…¶ä»–æ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ã€‚C++ä¸­æœ‰å¤šç§ä½œç”¨åŸŸç±»å‹ï¼š

### 5.1 å…¨å±€ä½œç”¨åŸŸ

å…¨å±€ä½œç”¨åŸŸä¸­çš„æ ‡è¯†ç¬¦åœ¨æ•´ä¸ªç¨‹åºä¸­å¯è§ï¼ˆå¦‚æœè¢«æ­£ç¡®å£°æ˜ï¼‰ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
int global_var = 10;  // å…¨å±€å˜é‡

void global_func() {  // å…¨å±€å‡½æ•°
    // å¯ä»¥è®¿é—®global_var
}

int main() {
    // å¯ä»¥è®¿é—®global_varå’Œglobal_func
    return 0;
}
```

### 5.2 å±€éƒ¨ä½œç”¨åŸŸ

å±€éƒ¨ä½œç”¨åŸŸä¸­çš„æ ‡è¯†ç¬¦åªåœ¨å®šä¹‰å®ƒçš„å—ï¼ˆ`{}`ï¼‰å†…å¯è§ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
void func() {
    int local_var = 20;  // å±€éƒ¨å˜é‡ï¼Œåªåœ¨funcå‡½æ•°å†…å¯è§
    
    {  // å†…éƒ¨å—
        int inner_var = 30;  // åªåœ¨å†…éƒ¨å—å†…å¯è§
        // å¯ä»¥è®¿é—®local_varå’Œinner_var
    }
    
    // ä¸èƒ½è®¿é—®inner_var
}

int main() {
    // ä¸èƒ½è®¿é—®local_varå’Œinner_var
    return 0;
}
```

### 5.3 å‘½åç©ºé—´ä½œç”¨åŸŸ

å‘½åç©ºé—´ä½œç”¨åŸŸä¸­çš„æ ‡è¯†ç¬¦åœ¨è¯¥å‘½åç©ºé—´å†…å¯è§ï¼Œæˆ–é€šè¿‡ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦åœ¨å¤–éƒ¨å¯è§ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
namespace ns {
    int ns_var = 40;  // å‘½åç©ºé—´å˜é‡
}

int main() {
    // å¯ä»¥é€šè¿‡ns::ns_varè®¿é—®
    std::cout << ns::ns_var << std::endl;
    return 0;
}
```

### 5.4 ç±»ä½œç”¨åŸŸ

ç±»ä½œç”¨åŸŸä¸­çš„æ ‡è¯†ç¬¦ï¼ˆæˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ï¼‰åªåœ¨ç±»å†…å¯è§ï¼Œæˆ–é€šè¿‡å¯¹è±¡ã€æŒ‡é’ˆæˆ–å¼•ç”¨åœ¨å¤–éƒ¨è®¿é—®ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
class MyClass {
public:
    int member_var = 50;  // ç±»æˆå‘˜å˜é‡
    
    void member_func() {  // ç±»æˆå‘˜å‡½æ•°
        // å¯ä»¥è®¿é—®member_var
    }
};

int main() {
    MyClass obj;
    obj.member_var = 60;  // é€šè¿‡å¯¹è±¡è®¿é—®æˆå‘˜å˜é‡
    obj.member_func();    // é€šè¿‡å¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°
    return 0;
}
```

### 5.5 å—ä½œç”¨åŸŸ

å—ä½œç”¨åŸŸæ˜¯ç”±ä¸€å¯¹å¤§æ‹¬å· `{}` å®šä¹‰çš„ä½œç”¨åŸŸï¼ŒåŒ…æ‹¬å‡½æ•°ä½“ã€ifè¯­å¥ã€å¾ªç¯è¯­å¥ç­‰ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
int main() {
    int x = 10;  // ä¸»å‡½æ•°å—ä½œç”¨åŸŸ
    
    if (x > 5) {
        int y = 20;  // ifè¯­å¥å—ä½œç”¨åŸŸ
        // å¯ä»¥è®¿é—®xå’Œy
    }
    
    // ä¸èƒ½è®¿é—®y
    
    for (int i = 0; i < 5; i++) {  // forå¾ªç¯å—ä½œç”¨åŸŸ
        // å¯ä»¥è®¿é—®xå’Œi
    }
    
    // ä¸èƒ½è®¿é—®i
    
    return 0;
}
```

## 6. å†…éƒ¨é“¾æ¥ä¸å¤–éƒ¨é“¾æ¥

### 6.1 å¤–éƒ¨é“¾æ¥

å…·æœ‰å¤–éƒ¨é“¾æ¥çš„æ ‡è¯†ç¬¦å¯ä»¥è¢«å…¶ä»–æ–‡ä»¶è®¿é—®ï¼Œé€šè¿‡`extern`å…³é”®å­—å£°æ˜ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
// file1.cpp
int external_var = 100;  // å¤–éƒ¨é“¾æ¥ï¼Œé»˜è®¤

// file2.cpp
extern int external_var;  // å£°æ˜å¤–éƒ¨å˜é‡

int main() {
    std::cout << external_var << std::endl;  // å¯ä»¥è®¿é—®
    return 0;
}
```

### 6.2 å†…éƒ¨é“¾æ¥

å…·æœ‰å†…éƒ¨é“¾æ¥çš„æ ‡è¯†ç¬¦åªèƒ½åœ¨å½“å‰æ–‡ä»¶ä¸­è®¿é—®ï¼Œä½¿ç”¨`static`å…³é”®å­—æˆ–åŒ¿åå‘½åç©ºé—´å®ç°ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
// file1.cpp
static int internal_var = 200;  // å†…éƒ¨é“¾æ¥

// file2.cppæ— æ³•è®¿é—®internal_var
```

## ğŸ¯ ç»ƒä¹ ï¼šswapå‡½æ•°é‡è½½

**ä»»åŠ¡ï¼š** ç¼–å†™ä¸€ä¸ª `swap` å‡½æ•°ï¼Œä½¿ç”¨â€œå¼•ç”¨ä¼ é€’â€äº¤æ¢ä¸¤ä¸ªæ•´æ•°çš„å€¼ï¼›å†é‡è½½å®ƒä»¥æ”¯æŒæµ®ç‚¹æ•°ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

```cpp
#include <iostream>

// äº¤æ¢ä¸¤ä¸ªæ•´æ•°çš„å‡½æ•°
void swap(int& a, int& b) {
    int temp = a;
    a = b;
    b = temp;
}

// é‡è½½swapå‡½æ•°ï¼Œäº¤æ¢ä¸¤ä¸ªæµ®ç‚¹æ•°
void swap(double& a, double& b) {
    double temp = a;
    a = b;
    b = temp;
}

// æµ‹è¯•ä»£ç 
int main() {
    // æµ‹è¯•æ•´æ•°äº¤æ¢
    int x = 5, y = 10;
    std::cout << "äº¤æ¢å‰ï¼šx = " << x << ", y = " << y << std::endl;
    swap(x, y);
    std::cout << "äº¤æ¢åï¼šx = " << x << ", y = " << y << std::endl;
    
    // æµ‹è¯•æµ®ç‚¹æ•°äº¤æ¢
    double a = 3.14, b = 6.28;
    std::cout << "äº¤æ¢å‰ï¼ša = " << a << ", b = " << b << std::endl;
    swap(a, b);
    std::cout << "äº¤æ¢åï¼ša = " << a << ", b = " << b << std::endl;
    
    return 0;
}
```

**è¾“å‡ºç»“æœï¼š**
```
äº¤æ¢å‰ï¼šx = 5, y = 10
äº¤æ¢åï¼šx = 10, y = 5
äº¤æ¢å‰ï¼ša = 3.14, b = 6.28
äº¤æ¢åï¼ša = 6.28, b = 3.14
```

## ğŸ¯ è¿›é˜¶ç»ƒä¹ ï¼šå‡½æ•°å‚æ•°ä¼ é€’æ¯”è¾ƒ

**ä»»åŠ¡ï¼š** ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ¯”è¾ƒå€¼ä¼ é€’ã€å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’çš„æ•ˆç‡å·®å¼‚ï¼Œä½¿ç”¨ä¸€ä¸ªè¾ƒå¤§çš„è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œæµ‹è¯•ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

```cpp
#include <iostream>
#include <chrono>

// å®šä¹‰ä¸€ä¸ªè¾ƒå¤§çš„è‡ªå®šä¹‰å¯¹è±¡
class BigObject {
public:
    BigObject() {
        for (int i = 0; i < 1000000; i++) {
            data[i] = i;
        }
    }
    
    int data[1000000];  // çº¦4MBå¤§å°ï¼ˆintå 4å­—èŠ‚ï¼‰
};

// å€¼ä¼ é€’ï¼šæ‹·è´æ•´ä¸ªå¯¹è±¡
void pass_by_value(BigObject obj) {
    // ç©ºæ“ä½œï¼Œä»…æµ‹è¯•ä¼ é€’æˆæœ¬
}

// å¼•ç”¨ä¼ é€’ï¼šä¼ é€’å¯¹è±¡å¼•ç”¨ï¼Œæ— æ‹·è´
void pass_by_reference(const BigObject& obj) {
    // ç©ºæ“ä½œï¼Œä»…æµ‹è¯•ä¼ é€’æˆæœ¬
}

// æŒ‡é’ˆä¼ é€’ï¼šä¼ é€’å¯¹è±¡æŒ‡é’ˆï¼Œæ— æ‹·è´
void pass_by_pointer(const BigObject* obj) {
    // ç©ºæ“ä½œï¼Œä»…æµ‹è¯•ä¼ é€’æˆæœ¬
}

int main() {
    BigObject obj;
    const int iterations = 1000;
    
    // æµ‹è¯•å€¼ä¼ é€’
    auto start = std::chrono::high_resolution_clock::now();
    for (int i = 0; i < iterations; i++) {
        pass_by_value(obj);
    }
    auto end = std::chrono::high_resolution_clock::now();
    auto duration_value = std::chrono::duration_cast<std::chrono::milliseconds>(end - start);
    std::cout << "å€¼ä¼ é€’è€—æ—¶ï¼š" << duration_value.count() << " æ¯«ç§’" << std::endl;
    
    // æµ‹è¯•å¼•ç”¨ä¼ é€’
    start = std::chrono::high_resolution_clock::now();
    for (int i = 0; i < iterations; i++) {
        pass_by_reference(obj);
    }
    end = std::chrono::high_resolution_clock::now();
    auto duration_reference = std::chrono::duration_cast<std::chrono::milliseconds>(end - start);
    std::cout << "å¼•ç”¨ä¼ é€’è€—æ—¶ï¼š" << duration_reference.count() << " æ¯«ç§’" << std::endl;
    
    // æµ‹è¯•æŒ‡é’ˆä¼ é€’
    start = std::chrono::high_resolution_clock::now();
    for (int i = 0; i < iterations; i++) {
        pass_by_pointer(&obj);
    }
    end = std::chrono::high_resolution_clock::now();
    auto duration_pointer = std::chrono::duration_cast<std::chrono::milliseconds>(end - start);
    std::cout << "æŒ‡é’ˆä¼ é€’è€—æ—¶ï¼š" << duration_pointer.count() << " æ¯«ç§’" << std::endl;
    
    return 0;
}
```

**é¢„æœŸç»“æœï¼š**
- å€¼ä¼ é€’è€—æ—¶æœ€é•¿ï¼ˆå› ä¸ºæ¯æ¬¡éƒ½è¦æ‹·è´4MBçš„å¯¹è±¡ï¼‰
- å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’è€—æ—¶éå¸¸çŸ­ï¼ˆå‡ ä¹ä¸º0æ¯«ç§’ï¼‰

è¿™ä¸ªç»ƒä¹ å±•ç¤ºäº†å¯¹äºå¤§å¯¹è±¡ï¼Œä½¿ç”¨å¼•ç”¨ä¼ é€’æˆ–æŒ‡é’ˆä¼ é€’å¯ä»¥æ˜¾è‘—æé«˜ç¨‹åºæ•ˆç‡ã€‚
